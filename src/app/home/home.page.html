<ion-header>
  <ion-toolbar>
    <ion-title>
      connect
    </ion-title>
  </ion-toolbar>
</ion-header>
 
<ion-content>

<ion-list  *ngFor="let userdetail of userlist[0]" >
	<ion-item  button (click)="joinchat(userdetail)" detail='false' [attr.userid]="currentUser!=userdetail.muserid.id?userdetail.muserid.id:userdetail.sfriendid.id">
	  <ion-avatar slot="start" >
	    <img src="https://www.gravatar.com/avatar/0?d=monsterid&amp;f=y">
	  </ion-avatar>
	  <ion-label>
	    <h2>{{currentUser!=userdetail.muserid.id?userdetail.muserid.name:userdetail.sfriendid.name}}</h2>
  	  <ion-note>
  	    <p *ngIf="newmessage.indexOf(currentUser!=userdetail.muserid.id?userdetail.muserid.id:userdetail.sfriendid.id)>-1 || userdetail.threads.length>0;else newchat;">
    	<span *ngIf="newmessage.indexOf(currentUser!=userdetail.muserid.id?userdetail.muserid.id:userdetail.sfriendid.id)>-1;else lastmessage;"><b>New message</b></span>
    	<ng-template #lastmessage><ion-icon name="chatboxes" style="vertical-align: middle;"></ion-icon> {{userdetail.threads[0]['message']}}</ng-template>
  	    </p>
    	<ng-template #newchat><ion-icon name="chatboxes" style="vertical-align: middle;"></ion-icon> Tap to Chat</ng-template>
  	  </ion-note>
	  </ion-label>
	  <ion-icon name="radio-button-off" size="small" slot="end" color="success" *ngIf="newmessage.indexOf(currentUser!=userdetail.muserid.id?userdetail.muserid.id:userdetail.sfriendid.id)>-1"></ion-icon>
	</ion-item>

</ion-list>

</ion-content>
